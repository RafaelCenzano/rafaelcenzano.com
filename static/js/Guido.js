if(!Interactive)var Interactive=function(){var e,i,t,s,n,r=function(e,i,t){if("addEventListener"in e)e.addEventListener(i,t);else{var s=e["on"+i];e["on"+i]=function(i){var n=t.apply(i.target,[i]);return s&&s.apply(e,[i]),n}}},o=function(e){this.target=e.target,function(e){document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(e,null),i=parseInt(e.paddingLeft,10)||0,t=parseInt(e.paddingTop,10)||0,s=parseInt(e.borderLeftWidth,10)||0,n=parseInt(e.borderTopWidth,10)||0)}(this.target),this.listeners=[],e.papplet&&"draw"in e.papplet&&(e.papplet.draw=function(e,i,t){return function(){e.preDraw(i),t(),e.postDraw(i)}}(this,e.papplet,e.papplet.draw));e="mousemove,mousedown,mouseup,click,dblclick,mouseover,mouseout,mouseenter,mouseleave,mousewheel,DOMMouseScroll".split(",");var o,l={mousemove:"mouseMoved",mousedown:"mousePressed",dblclick:"mouseDoubleClicked",mouseup:"mouseReleased",mousewheel:"mouseScrolled",DOMMouseScroll:"mouseScrolled"};for(o in e)!function(e,o,l,d){r(o,l,function(r){var l,h,a=0;if(h=0,(l=o).offsetParent)do{a+=l.offsetLeft,h+=l.offsetTop}while(l=l.offsetParent);l=o;do{a-=l.scrollLeft||0,h-=l.scrollTop||0}while(l=l.parentNode);for(var c in a+=i,h+=t,a+=s,h+=n,a+=window.pageXOffset,h+=window.pageYOffset,l=a,e.listeners)e.listeners[c].isActive()&&d in e.listeners[c]&&("mouseScrolled"==d?e.listeners[c][d](r.detail?-1*r.detail:r.wheelDelta/40,r.pageX-l,r.pageY-h):e.listeners[c][d](r.pageX-l,r.pageY-h))})}(this,this.target,e[o],l[e[o]]);this.add=function(e){this.listeners.push(e)},this.preDraw=function(){},this.postDraw=function(){if(this.listeners)for(var e in this.listeners)"draw"in this.listeners[e]&&this.listeners[e].draw()}};o.make=function(i){e=new o({target:i.externals.canvas,papplet:i})},o.add=function(i){e.add(new l(i))},o.setActive=function(i,t){if(e)for(var s in e.listeners){var n=e.listeners[s];n.listener==i&&n.setActive(t)}},o.insideRect=function(e,i,t,s,n,r){return n>=e&&n<=e+t&&r>=i&&r<=i+s};var l=function(e){this.listener=e,"isInside"in this.listener||("x"in this.listener&&"y"in this.listener&&"width"in this.listener&&"height"in this.listener?this.listener.isInside=function(e,i){return o.insideRect(this.x,this.y,this.width,this.height,e,i)}:alert("Interactive: listener must implement\npublic boolean isInside (float mx, float my)")),this.pressed=this.dragged=this.hover=!1,this.activated=!0,this.clickedMouseX,this.clickedMouseY,this.clickedPositionX,this.clickedPositionY,this.draggedDistX,this.draggedDistY,this.lastPressed=0,this.activated=!0,this.mousePressed=function(e,i){this.activated&&(this.pressed=this.listener.isInside(e,i))&&(this.clickedPositionX=this.listener.x,this.clickedPositionY=this.listener.y,this.clickedMouseX=e,this.clickedMouseY=i,"mousePressed"in this.listener&&this.listener.mousePressed(e,i))},this.mouseDoubleClicked=function(e,i){this.activated&&this.listener.isInside(e,i)&&"mouseDoubleClicked"in this.listener&&this.listener.mouseDoubleClicked(e,i)},this.mouseMoved=function(e,i){if(this.activated)if(this.dragged=this.pressed)this.draggedDistX=this.clickedMouseX-e,this.draggedDistY=this.clickedMouseY-i,"mouseDragged"in this.listener&&this.listener.mouseDragged(e,i,this.clickedPositionX-this.draggedDistX,this.clickedPositionY-this.draggedDistY);else{var t=this.listener.isInside(e,i);!t&&this.hover?"mouseExited"in this.listener&&this.listener.mouseExited(e,i):t&&!this.hover?"mouseEntered"in this.listener&&this.listener.mouseEntered(e,i):t&&"mouseMoved"in this.listener&&this.listener.mouseMoved(e,i),this.hover=t}},this.mouseReleased=function(e,i){this.activated&&(this.dragged&&(this.draggedDistX=this.clickedMouseX-e,this.draggedDistY=this.clickedMouseY-i),this.pressed&&"mouseReleased"in this.listener&&this.listener.mouseReleased(e,i),this.pressed=this.dragged=!1)},this.mouseScrolled=function(e,i,t){this.activated&&this.listener.isInside(i,t)&&"mouseScrolled"in this.listener&&this.listener.mouseScrolled(e)},this.setActive=function(e){this.activated=e,this.listener&&"setActive"in this.listener&&this.listener.setActive(e)},this.isActive=function(){return this.listener&&"isActive"in this.listener?this.listener.isActive():this.activated},this.draw=function(){if(this.activated&&this.listener&&"draw"in this.listener)return this.listener.draw()}};return o}();